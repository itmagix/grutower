#!/bin/bash

if [ -f /tmp/.provisioningdone ] ; then
echo "Provisioning already done, continuing boot"
exit
fi

clear
echo '────────────▀▄───█───▄▀'
echo '───────────▄▄▄█▄▄█▄▄█▄▄▄'
echo '────────▄▀▀═════════════▀▀▄'
echo '───────█═══════════════════█'
echo '──────█═════════════════════█'
echo '─────█═══▄▄▄▄▄▄▄═══▄▄▄▄▄▄▄═══█'
echo '────█═══█████████═█████████═══█'
echo '────█══██▀────▀█████▀────▀██══█'
echo '───██████─█▀█───███─█▀█───██████'
echo '───██████─▀▀▀───███─▀▀▀───██████'
echo '────█══▀█▄────▄██─██▄────▄█▀══█'
echo '────█════▀█████▀───▀█████▀════█'
echo '────█═════════════════════════█'
echo '────█═════════════════════════█      _____________________________________________'
echo '────█═══════█▀█▀█▀█▀█▀█═══════█     / Oh..... Hi there!                           \'
echo '────█═══════▀▄───────▄▀═══════█    / My name is Kevin, and this is the first time  \' 
echo '───▐▓▓▌═══════▀▄█▄█▄▀═══════▐▓▓▌   \   you start your Kubernetes cluster to be!    /' 
echo '───▐▐▓▓▌▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▐▓▓▌     \ ____________________________________________/'
echo '───█══▐▓▄▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▄▓▌══█'
echo '──█══▌═▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌═▐══█'
echo '──█══█═▐▓▓▓▓▓▓▄▄▄▄▄▄▄▓▓▓▓▓▓▌═█══█'
echo '──█══█═▐▓▓▓▓▓▓▐██▀██▌▓▓▓▓▓▓▌═█══█'
echo '──█══█═▐▓▓▓▓▓▓▓▀▀▀▀▀▓▓▓▓▓▓▓▌═█══█'
echo '──█══█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█══█'
echo '─▄█══█▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌█══█▄'
echo '─█████▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌─█████'
echo '─██████▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌─██████'
echo '──▀█▀█──▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌───█▀█▀'
echo '─────────▐▓▓▓▓▓▓▌▐▓▓▓▓▓▓▌'
echo '──────────▐▓▓▓▓▌──▐▓▓▓▓▌'
echo '─────────▄████▀────▀████▄'
echo '─────────▀▀▀▀────────▀▀▀▀'
sleep 5

clear
echo '────────────▀▄───█───▄▀'
echo '───────────▄▄▄█▄▄█▄▄█▄▄▄'
echo '────────▄▀▀═════════════▀▀▄'
echo '───────█═══════════════════█'
echo '──────█═════════════════════█'
echo '─────█═══▄▄▄▄▄▄▄═══▄▄▄▄▄▄▄═══█'
echo '────█═══█████████═█████████═══█'
echo '────█══██▀────▀█████▀────▀██══█'
echo '───██████─█▀█───███─█▀█───██████'
echo '───██████─▀▀▀───███─▀▀▀───██████'
echo '────█══▀█▄────▄██─██▄────▄█▀══█'
echo '────█════▀█████▀───▀█████▀════█'
echo '────█═════════════════════════█'
echo '────█═════════════════════════█      ___________________________________________________'
echo '────█═══════█▀█▀█▀█▀█▀█═══════█     / We are gonna have so much fun!                    \'
echo '────█═══════▀▄───────▄▀═══════█    / But first we need to provision Gru and his Minions, \'
echo '───▐▓▓▌═══════▀▄█▄█▄▀═══════▐▓▓▌   \  grab yourself a beer and let me do the job!        /'
echo '───▐▐▓▓▌▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▐▓▓▌     \ __________________________________________________/'
echo '───█══▐▓▄▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▄▓▌══█'
echo '──█══▌═▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌═▐══█'
echo '──█══█═▐▓▓▓▓▓▓▄▄▄▄▄▄▄▓▓▓▓▓▓▌═█══█'
echo '──█══█═▐▓▓▓▓▓▓▐██▀██▌▓▓▓▓▓▓▌═█══█'
echo '──█══█═▐▓▓▓▓▓▓▓▀▀▀▀▀▓▓▓▓▓▓▓▌═█══█'
echo '──█══█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█══█'
echo '─▄█══█▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌█══█▄'
echo '─█████▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌─█████'
echo '─██████▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌─██████'
echo '──▀█▀█──▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌───█▀█▀'
echo '─────────▐▓▓▓▓▓▓▌▐▓▓▓▓▓▓▌'
echo '──────────▐▓▓▓▓▌──▐▓▓▓▓▌'
echo '─────────▄████▀────▀████▄'
echo '─────────▀▀▀▀────────▀▀▀▀'
sleep 5

clear
echo '────────────▀▄───█───▄▀'
echo '───────────▄▄▄█▄▄█▄▄█▄▄▄'
echo '────────▄▀▀═════════════▀▀▄'
echo '───────█═══════════════════█'
echo '──────█═════════════════════█'
echo '─────█═══▄▄▄▄▄▄▄═══▄▄▄▄▄▄▄═══█'
echo '────█═══█████████═█████████═══█'
echo '────█══██▀────▀█████▀────▀██══█'
echo '───██████─█▀█───███─█▀█───██████'
echo '───██████─▀▀▀───███─▀▀▀───██████'
echo '────█══▀█▄────▄██─██▄────▄█▀══█'
echo '────█════▀█████▀───▀█████▀════█'
echo '────█═════════════════════════█'
echo '────█═════════════════════════█      _____________________________________________________________________________________'
echo '────█═══════█▀█▀█▀█▀█▀█═══════█     / See you in about.... an hour or so, depends on your internet connection and such.   \'
echo '────█═══════▀▄───────▄▀═══════█    / Now we gonna wait for about 30 seconds to make sure all the Minion nodes are booted.  \'
echo '───▐▓▓▌═══════▀▄█▄█▄▀═══════▐▓▓▌   \ ______________________________________________________________________________________/'
echo '───▐▐▓▓▌▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▐▓▓▌' 
echo '───█══▐▓▄▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▄▓▌══█'
echo '──█══▌═▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌═▐══█'
echo '──█══█═▐▓▓▓▓▓▓▄▄▄▄▄▄▄▓▓▓▓▓▓▌═█══█'
echo '──█══█═▐▓▓▓▓▓▓▐██▀██▌▓▓▓▓▓▓▌═█══█'
echo '──█══█═▐▓▓▓▓▓▓▓▀▀▀▀▀▓▓▓▓▓▓▓▌═█══█'
echo '──█══█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█══█'
echo '─▄█══█▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌█══█▄'
echo '─█████▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌─█████'
echo '─██████▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌─██████'
echo '──▀█▀█──▐▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▌───█▀█▀'
echo '─────────▐▓▓▓▓▓▓▌▐▓▓▓▓▓▓▌'
echo '──────────▐▓▓▓▓▌──▐▓▓▓▓▌'
echo '─────────▄████▀────▀████▄'
echo '─────────▀▀▀▀────────▀▀▀▀'
sleep 30

# Getting sources
git clone -b runonce_script --single-branch https://github.com/itmagix/grutower.git /home/pirate/

# Running provisioning script
cd /home/pirate/grutower
./scripts/provisioning.sh

# Set already run file
touch /tmp/.provisioningdone
